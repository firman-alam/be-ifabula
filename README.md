# Backend Fullstack Library App

## Tech Stack

- **Express**: Server framework for building the RESTful API.
- **MongoDB**: Database for storing user and book information.
- **JWT**: Auth

## Table Data

### User

- **Fields:**
  - `_id` (automatically generated by MongoDB)
  - `email` (unique)
  - `password` (encrypted)
  - `isAdmin` (boolean, default: false)

### Book

- **Fields:**
  - `_id` (automatically generated by MongoDB)
  - `title`
  - `author`
  - `genre`
  - `ISBN`
  - `copiesAvailable` (integer, default: totalCopies)
  - `totalCopies` (integer)
  - `borrowedBy` (array of user `_id`)

## API

### User Endpoints

#### 1. Sign-Up

- **Endpoint:** `/api/user/sign-up`
- **Method:** POST
- **Payload:**

  - `email` (string)
  - `password` (string)
  - `isAdmin` (boolean, default: false)

- **Response:**
  - Success: 201 Created
  - Failure: 400 Bad Request (invalid payload) / 409 Conflict (if the email is already registered)

#### 2. Sign-In

- **Endpoint:** `/api/user/sign-in`
- **Method:** POST
- **Payload:**

  - `email` (string)
  - `password` (string)

- **Response:**
  - Success: 200 OK with a JWT token
  - Failure: 401 Unauthorized (invalid credentials)

### Book Endpoints

#### 1. Get All Books

- **Endpoint:** `/book`
- **Method:** GET

- **Response:**
  - Success: 200 OK with an array of book objects
  - Failure: 500 Internal Server Error

#### 2. Get Book by ID

- **Endpoint:** `/book/:id`
- **Method:** GET

- **Response:**
  - Success: 200 OK with the book object
  - Failure: 404 Not Found (if the book is not found)

#### 3. Add New Book

- **Endpoint:** `/books`
- **Method:** POST
- **Payload:**

  - `title` (string)
  - `author` (string)
  - `image` (string)
  - `qty` (integer)

- **Response:**
  - Success: 201 Created with the created book object
  - Failure: 400 Bad Request (invalid payload)

#### 4. Borrow Book

- **Endpoint:** `/book/borrow`
- **Method:** POST
- **Payload:**

  - `userId` (string)
  - `bookId` (string)

- **Response:**
  - Success: 200 OK with updated book object
  - Failure: 404 Not Found (if the book is not found) / 400 Bad Request (if no copies are available)

#### 5. Return Book

- **Endpoint:** `/book/return`
- **Method:** POST
- **Payload:**

  - `userId` (string)
  - `bookId` (string)

- **Response:**
  - Success: 200 OK with updated book object
  - Failure: 404 Not Found (if the book is not found) / 400 Bad Request (if no copies are available)
